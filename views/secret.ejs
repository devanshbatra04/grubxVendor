<!DOCTYPE html>
<html >
<head>
    <meta charset="UTF-8">
    <title>CSS Responsive Table Layout</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">


    <link rel="stylesheet" href="css/tables/style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



</head>

<body>
<a href="/logout">logout</a>
<div class="wrapper">
    <h3 style="color: #f8f8ff">
        Awaiting confirmation
    </h3>
    <div class="table" id="red-table">

        <div class="row header">
            <div class="cell">
                Order Number
            </div>
            <div class="cell">
                Items
            </div>
            <div class="cell">
                Order Price
            </div>
            <div class="cell">
                Customer Name
            </div>
            <div class="cell">
                Contact Number
            </div>
            <div class="cell">
                Delivery Time
            </div>
            <div class="cell">
                Confirm?
            </div>
        </div>

        <div class="row">
            <div class="cell">
                1
            </div>
            <div class="cell">
                <ul>
                    <li>Chilly Potato x <strong>2</strong></li>
                </ul>
                <ul>
                    <li>Maggi x <strong>1</strong></li>
                </ul>
            </div>
            <div class="cell">
                80
            </div>
            <div class="cell">
                Arnav
            </div>
            <div class="cell">
                893210021
            </div>
            <div class="cell">
                8:40 pm
            </div>
            <div class="cell">
                <button onclick="confirmCash()">
                    Confirm order
                </button>
                <button onclick="cancelOrder()">
                    Cancel order
                </button>
            </div>

        </div>
        <div class="row">
            <div class="cell">
                2
            </div>
            <div class="cell">
                <ul>
                    <li>Chilly Potato x <strong>2</strong></li>
                </ul>
                <ul>
                    <li>Maggi x <strong>1</strong></li>
                </ul>
            </div>
            <div class="cell">
                80
            </div>
            <div class="cell">
                Arnav
            </div>
            <div class="cell">
                893210021
            </div>
            <div class="cell">
                8:40 pm
            </div>
            <div class="cell">
                <button>
                    Confirm order
                </button>
                <button>
                    Cancel order
                </button>
            </div>
        </div>

    </div>
    <h3 style="color: #f8f8ff">
        Awaiting payment
    </h3>
    <div class="table" id="blue-table">

        <div class="row header blue">
            <div class="cell">
                Order Number
            </div>
            <div class="cell">
                Items
            </div>
            <div class="cell">
                Order Price
            </div>
            <div class="cell">
                Customer Name
            </div>
            <div class="cell">
                Contact Number
            </div>
            <div class="cell">
                Delivery Time
            </div>
            <div class="cell">
                Cancel Order
            </div>
        </div>

        <div class="row">
            <div class="cell">
                1
            </div>
            <div class="cell">
                <ul>
                    <li>Chilly Potato x <strong>2</strong></li>
                </ul>
                <ul>
                    <li>Maggi x <strong>1</strong></li>
                </ul>
            </div>
            <div class="cell">
                80
            </div>
            <div class="cell">
                Arnav
            </div>
            <div class="cell">
                893210021
            </div>
            <div class="cell">
                8:40 pm
            </div>
            <div class="cell">
                <button>
                    Cancel order
                </button>
            </div>
        </div>

    </div>

    <h3 style="color: #f8f8ff">
        Confirmed and Paid For
    </h3>
    <div class="table" id="green-table">

        <div class="row header green">
            <div class="cell">
                Order Number
            </div>
            <div class="cell">
                Items
            </div>
            <div class="cell">
                Order Price
            </div>
            <div class="cell">
                Customer Name
            </div>
            <div class="cell">
                Contact Number
            </div>
            <div class="cell">
                Delivery Time
            </div>
            <div class="cell">
                Status
            </div>
        </div>

        <div class="row">
            <div class="cell">
                1
            </div>
            <div class="cell">
                <ul>
                    <li>Chilly Potato x <strong>2</strong></li>
                </ul>
                <ul>
                    <li>Maggi x <strong>1</strong></li>
                </ul>
            </div>
            <div class="cell">
                80
            </div>
            <div class="cell">
                Arnav
            </div>
            <div class="cell">
                893210021
            </div>
            <div class="cell">
                8:40 pm
            </div>
            <div class="cell">
                Payment Confirmed
            </div>
        </div>

    </div>

</div>
<script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>

<script>
    function cancelOrder(){
        let Reason = window.prompt("Please enter remarks (optional)")
    }
    function confirmCash(){
        let Reason = window.confirm("This is a PAYMENT BY CASH order \nGrubX is not responsible in case buyer does not show up")
    }
</script>
<script src="/socket.io/socket.io.js"></script>
<script>
    var socket = io();
    socket.on("connect", function(){
        socket.emit("new Connection", ("<%= user.username %>"));
        console.log("sent");
        console.log(socket);
        socket.on('post-order', function(data){
            console.log(data);
            renderNew(data,'green-table');
        })
    })

    function renderNew(data, table){

        let options = "";
        if (table === 'red-table')
        {
            options = `<button onclick="confirmCash()">
            Confirm order
        </button>
        <button onclick="cancelOrder()">
            Cancel order
        </button>`

        }
        if (table === 'blue-table'){
            options = `
        <button onclick="cancelOrder()">
            Cancel order
        </button>`
        }

        if (table === 'green-table'){
            options = `
        <button onclick="completeOrder()">
            Complete
        </button>`
        }
      let   ul = "khali";
    let toAppend = `<div class="row">
            <div class="cell">
            1
            </div>
            <div class="cell">
            <ul>
                ${ul}
            </ul>
        </div>
        <div class="cell">
            ${data.totals}
            </div>
            <div class="cell">
            ${data.cust_name}
            </div>
            <div class="cell">
            ${data.contact}
            </div>
            <div class="cell">
            ${data.delivery_time}
        </div>
        <div class="cell">
        ${options}
        </div>
        </div>`;
        $(`#${table}`).append(toAppend);
    }

</script>
</body>
</html>